<!DOCTYPE html><html lang="en-us" >


<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Wowchemy 5.5.0 for Hugo" />
  

  
  










  







  
  
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media="print" onload="this.media='all'">
    
  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Mark Novak" />

  
  
  
    
  
  <meta name="description" content="







Before you arrive at RMBL.
Intro to network data manipulation." />

  
  <link rel="alternate" hreflang="en-us" href="https://models4data2theory.github.io/courses/prework_edgelist-to-network/" />

  
  
  
    <meta name="theme-color" content="#0072ff" />
  

  
  
    
    <script src="/js/mathjax-config.js"></script>
  

  

  <link rel="stylesheet" href="/css/vendor-bundle.min.c7b8d9abd591ba2253ea42747e3ac3f5.css" media="print" onload="this.media='all'">

  
  
  
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha512-W0xM4mr6dEP9nREo7Z9z+9X70wytKvMGeDsj7ps2+xg5QPrEBXC8tAW1IFnzjR6eoJ90JmCnFzerQJTLzIEHjA==" crossorigin="anonymous" media="print" onload="this.media='all'">
    

    
    
    
    
      
      
    
    
    

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/styles/github.min.css" crossorigin="anonymous" title="hl-light" media="print" onload="this.media='all'">
          <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" media="print" onload="this.media='all'" disabled>
        
      
    

    
    
    

    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.c5fb49caf56e2b73a0f72d0102f2d0ca.css" />

  



  


  


  




  
  
  

  

  
    <link rel="manifest" href="/manifest.webmanifest" />
  

  <link rel="icon" type="image/png" href="/media/icon_hu0409958f157fc50d4e355b357a277bb5_195869_32x32_fill_lanczos_center_3.png" />
  <link rel="apple-touch-icon" type="image/png" href="/media/icon_hu0409958f157fc50d4e355b357a277bb5_195869_180x180_fill_lanczos_center_3.png" />

  <link rel="canonical" href="https://models4data2theory.github.io/courses/prework_edgelist-to-network/" />

  
  
  
  
  
  
  
  
    
    
  
  

  
  
    
    
  
  <meta property="twitter:card" content="summary" />
  
  <meta property="og:site_name" content="Integrating Theory and Data in Plant-Pollinator Interactions" />
  <meta property="og:url" content="https://models4data2theory.github.io/courses/prework_edgelist-to-network/" />
  <meta property="og:title" content="Prework - Edgelist-to-Network | Integrating Theory and Data in Plant-Pollinator Interactions" />
  <meta property="og:description" content="







Before you arrive at RMBL.
Intro to network data manipulation." /><meta property="og:image" content="https://models4data2theory.github.io/media/icon_hu0409958f157fc50d4e355b357a277bb5_195869_512x512_fill_lanczos_center_3.png" />
    <meta property="twitter:image" content="https://models4data2theory.github.io/media/icon_hu0409958f157fc50d4e355b357a277bb5_195869_512x512_fill_lanczos_center_3.png" /><meta property="og:locale" content="en-us" />
  
    
      <meta
        property="article:published_time"
        content="2025-08-27T00:00:00&#43;00:00"
      />
    
    <meta property="article:modified_time" content="2025-08-27T00:00:00&#43;00:00">
  

  



  

  

  





  <title>Prework - Edgelist-to-Network | Integrating Theory and Data in Plant-Pollinator Interactions</title>
</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper   " data-wc-page-id="46e70dc2d02e77f1e7ae41abe0f63276" >

  
  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.14a0ed61c6dbd594b9c75193b25be179.js"></script>

  


<aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="Close"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control"
        aria-label="Search...">
        
      </div>

      
      

      

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>



  <div class="page-header">
    












<header class="header--fixed">
  <nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
    <div class="container-xl">

      
      <div class="d-none d-lg-inline-flex">
        <a class="navbar-brand" href="/">Integrating Theory and Data in Plant-Pollinator Interactions</a>
      </div>
      

      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false" aria-label="Toggle navigation">
      <span><i class="fas fa-bars"></i></span>
      </button>
      

      
      <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
        <a class="navbar-brand" href="/">Integrating Theory and Data in Plant-Pollinator Interactions</a>
      </div>
      

      
      
      <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

        
        <ul class="navbar-nav d-md-inline-flex">
          

          

          
          
          

          

          
          
          
          

          
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="/"><span>Home</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="/schedule"><span>Schedule</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link  active" href="/courses"><span>Content</span></a>
          </li>

          
          

          

          
          
          
            
              
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="https://www.rmbl.org" target="_blank" rel="noopener"><span>Venue</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="/faqs"><span>FAQs</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="/contact"><span>Contact</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="/fliers/models4data2theory_2025.pdf"><span>Flier</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="/thanks"><span>Thanks</span></a>
          </li>

          
          

          

          
          
          
            
              
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="https://rmbl.wufoo.com/forms/mcd6uso1hlrigy/" target="_blank" rel="noopener"><span>Apply</span></a>
          </li>

          
          

        

          
        </ul>
      </div>

      <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

        
        
          
        

        
        
        <li class="nav-item">
          <a class="nav-link js-search" href="#" aria-label="Search"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        
        
        

        
        

      </ul>

    </div>
  </nav>
</header>


  </div>

  <div class="page-body">
    
    
    

    




<div class="container-fluid docs">
  <div class="row flex-xl-nowrap">
    <div class="col-12 col-md-3 col-xl-2 docs-sidebar">
      <form class="docs-search d-flex align-items-center">
  <button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type="button" data-toggle="collapse" data-target="#docs-nav" aria-controls="docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    <div class="d-flex">
      <span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">
        
          Workshop Content
        
      </span>
      <span><i class="fas fa-chevron-down"></i></span>
    </div>
  </button>

  
  <button class="form-control sidebar-search js-search d-none d-md-flex">
    <i class="fas fa-search pr-2"></i>
    <span class="sidebar-search-text">Search...</span>
    <span class="sidebar-search-shortcut">/</span>
  </button>
  
</form>

<nav class="collapse docs-links" id="docs-nav">
  
  
  
  
  
  

  
  
    

    
      

      


  
    
    
    
    
      
    
    

    
      <ul class="nav docs-sidenav">
        <li class=""><a href="/courses/">Workshop Content</a></li>
    
      


  <li class=""><a href="/courses/prework_02_data_basics/">Prework - R Data Basics</a></li>



  <li class="active"><a href="/courses/prework_edgelist-to-network/">Prework - Edgelist-to-Network</a></li>



  <li class=""><a href="/courses/prework_network-visualization/">Prework - Network Visualization</a></li>



  <li class=""><a href="/courses/wkshp_networks/">Networks</a></li>



  <li class=""><a href="/courses/wkshp_interactions/">Model fitting</a></li>



  <li class=""><a href="/courses/wkshp_dynamics/">Dynamics</a></li>



  <li class=""><a href="/courses/potential_use_or_interest/">Of Potential Interest</a></li>

      
    

    
      </ul>
    

  
</nav>

    </div>

    
    
    <div class="d-none d-xl-block col-xl-2 docs-toc">
      

      <ul class="nav toc-top">
        <li><a href="#" id="back_to_top" class="docs-toc-title">Contents</a></li>
      </ul>

      <nav id="TableOfContents">
  <ul>
    <li><a href="#converting-empirical-data-to-networks">Converting empirical data to networks</a>
      <ul>
        <li><a href="#exercise">Exercise</a></li>
      </ul>
    </li>
    <li><a href="#easier--alternative-with-bipartite">Easier (?) alternative with <code>bipartite</code></a></li>
    <li><a href="#optional-exercise">Optional exercise</a></li>
  </ul>
</nav>

      
    </div>
    

    <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 docs-content" role="main">

      <article class="article">

        <div class="docs-article-container">
          

          <h1>Prework - Edgelist-to-Network</h1>

          <div class="article-style">
            <script src="/rmarkdown-libs/kePrint/kePrint.js"></script>
<link href="/rmarkdown-libs/lightable/lightable.css" rel="stylesheet" />
<script src="/rmarkdown-libs/kePrint/kePrint.js"></script>
<link href="/rmarkdown-libs/lightable/lightable.css" rel="stylesheet" />
<script src="/rmarkdown-libs/kePrint/kePrint.js"></script>
<link href="/rmarkdown-libs/lightable/lightable.css" rel="stylesheet" />
<script src="/rmarkdown-libs/kePrint/kePrint.js"></script>
<link href="/rmarkdown-libs/lightable/lightable.css" rel="stylesheet" />
<p><em>Before you arrive at RMBL.</em></p>
<p>Intro to network data manipulation.</p>
<!-- packages -->
<h2 id="converting-empirical-data-to-networks">Converting empirical data to networks</h2>
<p>This workshop is focused on the <em>integration</em> of empirical data and theory in pollination networks. An important first step toward that integration is to know how to take empirical data and convert them into the standardized matrix format that is used in most packages and functions. For mutualistic networks like plant-pollinator networks, as discussed above, that format is a <em>bipartite</em> matrix with plants as rows, pollinators as columns, and (typically) counts of interactions filling the matrix.</p>
<p>Typically, empirical data collected on ecological networks take the form of an <strong>edge list</strong>. This is the case for pollination networks in particular. To collect pollination network data, we are typically observing a set of flowers. When a flower visitor (presumed pollinator) visits a plant, we would record on a data sheet or field notebook the identity of the plant species and the identity of the flower visitor species. (In the field, we might capture an insect pollinator for later identification, but the idea remains the same, that at some point we would have a data sheet with the identities of the plants and the pollinators).</p>
<p>Similarly, you could also have an edge list created through pollen DNA metabarcoding; while you might need to play around with the formatting a bit it is common to end up with an edge list like you would have from field data collection.</p>
<p>That might look something like this:</p>
<table class="table table-condensed" style="width: auto !important; ">
 <thead>
  <tr>
   <th style="text-align:right;"> id.num </th>
   <th style="text-align:left;"> plant </th>
   <th style="text-align:left;"> pollinator </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 2371 </td>
   <td style="text-align:left;"> Delphinium barbeyi </td>
   <td style="text-align:left;"> Bombus flavifrons </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2372 </td>
   <td style="text-align:left;"> Heracleum spondophyllum </td>
   <td style="text-align:left;"> Thricops sp. </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2373 </td>
   <td style="text-align:left;"> Mertensia fusiformis </td>
   <td style="text-align:left;"> Bombus flavifrons </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2374 </td>
   <td style="text-align:left;"> Delphinium barbeyi </td>
   <td style="text-align:left;"> Bombus appositus </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2375 </td>
   <td style="text-align:left;"> Delphinium barbeyi </td>
   <td style="text-align:left;"> Bombus flavifrons </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2376 </td>
   <td style="text-align:left;"> Mertensia fusiformis </td>
   <td style="text-align:left;"> Colias sp. </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2377 </td>
   <td style="text-align:left;"> Delphinium barbeyi </td>
   <td style="text-align:left;"> Bombus flavifrons </td>
  </tr>
</tbody>
</table>
<p>&hellip; but we want to turn that into a bipartite matrix. One approach for coding that transformation is in the code chunk below, focused on the <code>tidyverse</code> way of doing things. For those of you familiar with the <code>bipartite</code> package in R, it contains a convenience function to carry out this same transformation (<code>frame2webs()</code>) and you can certainly just use that function without having to think much about it&hellip; though perhaps you do have to think about it a little more than you might like.</p>
<p>For prework for the workshop, we are going through the <code>tidyverse</code> approach precisely because it does make you think a little more, and is good practice for some of the data programming that we will be doing throughout the workshop. At the end of this file, we also have included code for using the <code>frame2webs</code> approach.</p>
<p>The general <code>tidyverse</code> approach is:</p>
<ol>
<li><em>group</em> our data by plant species and pollinator species
<ul>
<li>ultimately we don&rsquo;t want repeated rows or columns for a plant or pollinator; we want them all combined together</li>
</ul>
</li>
<li><em>tally</em> the number of visits for each pollinator species to that plant species&mdash;basically &ldquo;collapsing&rdquo; the rows that have the same <em>plant-pollinator combinations</em> and counting up how many interactions there were for each unique plant-pollinator combination</li>
<li><em>create a new column for each pollinator species</em>: keeping the plants as rows, we&rsquo;ll do this with the <code>pivot_wider</code> function in <code>dplyr</code> (part of the <code>tidyverse</code>), in the process filling in for each plant-pollinator combination the number of interactions we calculated in the prior step
<ul>
<li>in doing this step, we are also &ldquo;collapsing&rdquo; all of the plant rows such that there will be one row per plant</li>
</ul>
</li>
</ol>
<p>Let&rsquo;s see this in action. We&rsquo;ll start with the data frame called <code>edgelist</code> which is exactly the same as the data in the table above. Before you begin, you&rsquo;ll want to initialize the <code>tidyverse</code> and <code>kableExtra</code> packages. The latter is not necessary for conducting the data transformation, but it&rsquo;s helpful for displaying your data in table form cleanly in Rmarkdown.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">kableExtra</span><span class="p">)</span>
</span></span></code></pre></div><p>For the first two steps of the transformation, here is how we do that, and what it looks like:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="c1"># step 1:</span>
</span></span><span class="line"><span class="cl"><span class="n">weighted</span> <span class="o">&lt;-</span> <span class="n">edgelist</span> <span class="o">%&gt;%</span>
</span></span><span class="line"><span class="cl">  <span class="nf">group_by</span><span class="p">(</span><span class="n">plant</span><span class="p">,</span> <span class="n">pollinator</span><span class="p">)</span> <span class="o">%&gt;%</span>
</span></span><span class="line"><span class="cl"><span class="c1"># step 2:</span>
</span></span><span class="line"><span class="cl">  <span class="nf">tally</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># show in nicely-formatted table:</span>
</span></span><span class="line"><span class="cl"><span class="nf">kable</span><span class="p">(</span><span class="n">weighted</span><span class="p">,</span> <span class="n">row.names</span> <span class="o">=</span> <span class="bp">F</span><span class="p">,</span> <span class="p">)</span> <span class="o">%&gt;%</span> <span class="nf">kable_styling</span><span class="p">(</span><span class="n">full_width</span> <span class="o">=</span> <span class="bp">F</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">  <span class="n">position</span> <span class="o">=</span> <span class="s">&#34;left&#34;</span><span class="p">,</span> <span class="n">bootstrap_options</span> <span class="o">=</span> <span class="s">&#34;condensed&#34;</span><span class="p">)</span>
</span></span></code></pre></div><table class="table table-condensed" style="width: auto !important; ">
 <thead>
  <tr>
   <th style="text-align:left;"> plant </th>
   <th style="text-align:left;"> pollinator </th>
   <th style="text-align:right;"> n </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Delphinium barbeyi </td>
   <td style="text-align:left;"> Bombus appositus </td>
   <td style="text-align:right;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Delphinium barbeyi </td>
   <td style="text-align:left;"> Bombus flavifrons </td>
   <td style="text-align:right;"> 3 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Heracleum spondophyllum </td>
   <td style="text-align:left;"> Thricops sp. </td>
   <td style="text-align:right;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mertensia fusiformis </td>
   <td style="text-align:left;"> Bombus flavifrons </td>
   <td style="text-align:right;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mertensia fusiformis </td>
   <td style="text-align:left;"> Colias sp. </td>
   <td style="text-align:right;"> 1 </td>
  </tr>
</tbody>
</table>
<p>The new <code>weighted</code> dataframe is displayed above. You&rsquo;ll see that it created a new column called &ldquo;<strong>n</strong>&rdquo; that contains the tallied the number of times each unique interaction occurred. It also &ldquo;collapsed&rdquo; the rows into unique plant-pollinator interactions; previously there were 7 rows, and now there are 5, because one of the unique interactions (between <em>Bombus flavifrons</em> and <em>Delphinium barbeyi</em>) happened three times.</p>
<p>Moving from this, let&rsquo;s check out the next step, where using the <code>pivot_wider</code> function we pivot the single &ldquo;pollinator&rdquo; column to form one new column for each unique entry in the old column. We will fill in the values for each row-by-column combination from the tallied interactions (the new &ldquo;<strong>n</strong>&rdquo; column).</p>
<p>Again there are 5 rows in this new matrix, with 4 unique values (<em>Bombus flavifrons</em> is represented twice), so we expect to see four pollinator columns emerge in the next step. Similarly, this should collapse the 5 current plant rows into 3, one for each unique plant species. So we should see a 3 row <code>\(\times\)</code> 4 column bipartite matrix when we are done.</p>
<p>This is how to get there:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="c1"># step 3 (pivot_wider)</span>
</span></span><span class="line"><span class="cl"><span class="n">bipart.net</span> <span class="o">&lt;-</span> <span class="n">weighted</span> <span class="o">%&gt;%</span>
</span></span><span class="line"><span class="cl">  <span class="nf">pivot_wider</span><span class="p">(</span><span class="n">id_cols</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;plant&#34;</span><span class="p">),</span> <span class="c1"># plants are the rows</span>
</span></span><span class="line"><span class="cl">              <span class="n">names_from</span> <span class="o">=</span> <span class="n">pollinator</span><span class="p">,</span> <span class="c1"># names of new columns: unique pollinators</span>
</span></span><span class="line"><span class="cl">              <span class="n">values_from</span> <span class="o">=</span> <span class="n">n</span><span class="p">,</span> <span class="c1"># values in the matrix from tallied interactions</span>
</span></span><span class="line"><span class="cl">              <span class="n">values_fill</span> <span class="o">=</span> <span class="m">0</span><span class="p">)</span> <span class="c1"># if no value, enter zero (otherwise NA)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># show in nicely-formatted table:  </span>
</span></span><span class="line"><span class="cl"><span class="nf">kable</span><span class="p">(</span><span class="n">bipart.net</span><span class="p">,</span> <span class="n">row.names</span> <span class="o">=</span> <span class="bp">F</span><span class="p">,</span> <span class="p">)</span> <span class="o">%&gt;%</span> <span class="nf">kable_styling</span><span class="p">(</span><span class="n">full_width</span> <span class="o">=</span> <span class="bp">F</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">  <span class="n">position</span> <span class="o">=</span> <span class="s">&#34;left&#34;</span><span class="p">,</span> <span class="n">bootstrap_options</span> <span class="o">=</span> <span class="s">&#34;condensed&#34;</span><span class="p">)</span>
</span></span></code></pre></div><table class="table table-condensed" style="width: auto !important; ">
 <thead>
  <tr>
   <th style="text-align:left;"> plant </th>
   <th style="text-align:right;"> Bombus appositus </th>
   <th style="text-align:right;"> Bombus flavifrons </th>
   <th style="text-align:right;"> Thricops sp. </th>
   <th style="text-align:right;"> Colias sp. </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Delphinium barbeyi </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Heracleum spondophyllum </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mertensia fusiformis </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
  </tr>
</tbody>
</table>
<p>Looks just as hoped for: a 3-row by 4-column matrix. Note in the code above that we specified that <code>values_fill = 0</code>. We did this because otherwise <code>R</code> would not know how to fill in the combinations for which it doesn&rsquo;t have any information, and so it would fill them in with <code>NA</code> if we left that argument out.</p>
<h3 id="exercise">Exercise</h3>
<p>Let&rsquo;s practice turning an edge list into a bipartite network; this time we will do it at a (slightly) larger scale. We are going to use data collected by Berry&rsquo;s Community Ecology class at the University of Washington in spring 2022, at the UW Medicinal Plant Garden (just outside the Life Sciences Building, where the Brosi Lab is based). The data for pollinators were collected at the family level.</p>
<p>The data file is <a href="https://models4data2theory.github.io/courses_data/Networks/medgarden.csv" target="_blank" rel="noopener"><code>medgarden.csv</code></a> (click on the name to download). Import it and follow the steps above to generate a bipartite network. Call the resulting dataframe <strong><code>bipartite.med</code></strong>.</p>
<p>You should get this exact bipartite network back:</p>
<table class="table table-condensed" style="width: auto !important; ">
 <thead>
  <tr>
   <th style="text-align:left;"> plant </th>
   <th style="text-align:right;"> Osmia </th>
   <th style="text-align:right;"> Bombus </th>
   <th style="text-align:right;"> Syrphid </th>
   <th style="text-align:right;"> Halictid </th>
   <th style="text-align:right;"> Muscid </th>
   <th style="text-align:right;"> Ant </th>
   <th style="text-align:right;"> Hummingbird </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Borago officinalis </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Camassia leichtlinii </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Catharanthus roseus </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Coclearia afficinalis </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Eriogonum umbellatum </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Erysimum asperum </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Gilia capitata </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Glaucium flavum </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Helleborus orientalis </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Heuchera micrantha </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Heuchera sanguinea </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Horminum pyrenaicum </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Hydrophyllum virginiana </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Iris douglasiana </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Polemonium reptans </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Polygonum bisorta </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Rhodiola rosea </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Ruta graveolens </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Sedua spathulifolium </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Smilacina stellata </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Thymus leucospermus </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Tragopogon porrifolius </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Wyethia angustifolia </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
  </tr>
</tbody>
</table>
<p>To format your network data in a nice table like the one above, in Rmarkdown, you can use this code:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="c1"># show in nicely-formatted table:  </span>
</span></span><span class="line"><span class="cl"><span class="nf">kable</span><span class="p">(</span><span class="n">bipart.med</span><span class="p">,</span> <span class="n">row.names</span> <span class="o">=</span> <span class="bp">F</span><span class="p">,</span> <span class="p">)</span> <span class="o">%&gt;%</span> <span class="nf">kable_styling</span><span class="p">(</span><span class="n">full_width</span> <span class="o">=</span> <span class="bp">F</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">  <span class="n">position</span> <span class="o">=</span> <span class="s">&#34;left&#34;</span><span class="p">,</span> <span class="n">bootstrap_options</span> <span class="o">=</span> <span class="s">&#34;condensed&#34;</span><span class="p">)</span>
</span></span></code></pre></div><h2 id="easier--alternative-with-bipartite">Easier (?) alternative with <code>bipartite</code></h2>
<p>The code above gives an understanding of how the data are transformed from an edge list into a bipartite network. Having that understanding of the code is helpful when your edge list data are formatted in an atypical way or have other challenges associated with them.</p>
<p>Still, as noted above, there is a potentially faster / easier way to accomplish the same task in the <code>bipartite</code> package in R, using the <code>frame2webs()</code> function. The downside is not just a lack of understanding of what is happening &ldquo;under the hood&rdquo;; it&rsquo;s also that the function has some, well, idiosyncrasies. We walk through its use below (to read more about the function, enter <code>?frame2webs</code> into the console).</p>
<p>A couple of things to keep in mind with this function:</p>
<ul>
<li><code>frame2webs()</code> assumes that you have data with <em>multiple sites</em>; if you only have one site you still have to input the site name to the function call. Thus, if you don&rsquo;t have a site name in your data (as in the included &ldquo;medgarden&rdquo; dataset), you have to add one.</li>
<li>The default output for <code>frame2webs()</code> is a list of arrays, where each site has its own network in the format of an array. That can be a powerful approach if you are doing a lot of computation across several distinct / separate networks, but at the cost of not being the easiest to work with.
<ul>
<li>Below, we have instead set the <code>type.out</code> argument to <code>= &quot;array&quot;</code> so that we get a numeric array instead of a list</li>
<li>We then convert that array back to a data frame for easier use</li>
</ul>
</li>
<li>When converting directly from an array to a data frame, because the array contains information about the site (even if there is only one site!), the column names will be altered to include both the pollinator and the site
<ul>
<li>We have fixed this (converted back to only the pollinator names) in the example below</li>
</ul>
</li>
<li>In this format, in contrast to our <code>tidyverse</code> example, the plants are stored as row names rather than as a variable. That structure again has some advantages, but if you&rsquo;d rather have the plants as their own variable, we included code for that as well.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">bipartite</span><span class="p">)</span>  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># add a &#34;site&#34; variable</span>
</span></span><span class="line"><span class="cl"><span class="n">med</span><span class="o">$</span><span class="n">site</span> <span class="o">=</span> <span class="s">&#34;site1&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># run `frame2webs`</span>
</span></span><span class="line"><span class="cl"><span class="n">bipartite.med</span> <span class="o">=</span> <span class="nf">frame2webs</span><span class="p">(</span><span class="n">med</span><span class="p">,</span> <span class="n">varnames</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="n">lower</span> <span class="o">=</span> <span class="s">&#34;plant&#34;</span><span class="p">,</span> <span class="n">higher</span> <span class="o">=</span> <span class="s">&#34;pollinator&#34;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                                             <span class="n">webID</span> <span class="o">=</span> <span class="s">&#34;site&#34;</span><span class="p">),</span> <span class="n">type.out</span> <span class="o">=</span> <span class="s">&#34;array&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># optional: view the output (array)</span>
</span></span><span class="line"><span class="cl"><span class="n">bipartite.med</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># optional: convert to data frame</span>
</span></span><span class="line"><span class="cl"><span class="n">bipartite.med</span> <span class="o">=</span> <span class="nf">data.frame</span><span class="p">(</span><span class="n">bipartite.med</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># optional: view the output (data frame); note pollinator names</span>
</span></span><span class="line"><span class="cl"><span class="n">bipartite.med</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># fix pollinator names (other possible ways to do this in the above step)</span>
</span></span><span class="line"><span class="cl"><span class="nf">names</span><span class="p">(</span><span class="n">bipartite.med</span><span class="p">)</span> <span class="o">=</span> <span class="nf">sort</span><span class="p">(</span><span class="nf">unique</span><span class="p">(</span><span class="n">med</span><span class="o">$</span><span class="n">pollinator</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># optional; if you want a separate variable (column) for plant names</span>
</span></span><span class="line"><span class="cl"><span class="n">bipartite.med</span><span class="o">$</span><span class="n">plant</span> <span class="o">=</span> <span class="nf">row.names</span><span class="p">(</span><span class="n">bipartite.med</span><span class="p">)</span>
</span></span></code></pre></div><h2 id="optional-exercise">Optional exercise</h2>
<p>Convert the raw <code>medgarden</code> data to network format using <code>frame2webs()</code>, following the instructions above.</p>
          </div>

          



          
          
          <div class="article-widget">
            
<div class="post-nav">
  
  
  
  <div class="post-nav-item">
    <div class="meta-nav">Previous</div>
    <a href="/courses/prework_02_data_basics/" rel="next">Prework - R Data Basics</a>
  </div>
  
  
  
  <div class="post-nav-item">
    <div class="meta-nav">Next</div>
    <a href="/courses/prework_network-visualization/" rel="prev">Prework - Network Visualization</a>
  </div>
  
</div>

          </div>
          
        </div>

        <div class="body-footer">
          <p>Last updated on Aug 27, 2025</p>

          



          




          


        </div>

      </article>

      <footer class="site-footer">

  



  

  

  

  
  






  
  
  

  
  
    
  
  
    
  

  

  

  <p class="powered-by footer-license-icons">
    <a href="https://creativecommons.org/licenses/by-nc-nd/4.0" rel="noopener noreferrer" target="_blank" aria-label="Creative Commons">
      <i class="fab fa-creative-commons fa-2x" aria-hidden="true"></i>
      <i class="fab fa-creative-commons-by fa-2x" aria-hidden="true"></i>
      
        <i class="fab fa-creative-commons-nc fa-2x" aria-hidden="true"></i>
      
      
        <i class="fab fa-creative-commons-nd fa-2x" aria-hidden="true"></i>
      
    </a>
  </p>




  <p class="powered-by">
    
    
    
      
      
      
      
      
      
      Published with <a href="https://wowchemy.com/?utm_campaign=poweredby" target="_blank" rel="noopener">Wowchemy</a> — the free, <a href="https://github.com/wowchemy/wowchemy-hugo-themes" target="_blank" rel="noopener">open source</a> website builder that empowers creators.
    
  </p>
</footer>


    </main>
  </div>
</div>

  </div>

  <div class="page-footer">
    
    
  </div>

      

    
    <script src="/js/vendor-bundle.min.fab8b449b814cc9f95b22fcf2e45f05b.js"></script>

    
    
    
      

      
      

      

      
        
        <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/highlight.min.js" integrity="sha512-Ypjm0o7jOxAd4hpdoppSEN0TQOC19UtPAqD+4s5AlXmUvbmmS/YMxYqAqarQYyxTnB6/rqip9qcxlNB/3U9Wdg==" crossorigin="anonymous"></script>
        
        
        <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/languages/r.min.js" crossorigin="anonymous"></script>
        
        <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/languages/latex.min.js" crossorigin="anonymous"></script>
        
      

    

    
    
    

    
    
    <script src="https://cdn.jsdelivr.net/gh/bryanbraun/anchorjs@4.2.2/anchor.min.js" integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin="anonymous"></script>
    <script>
      anchors.add();
    </script>
    

    
    
    
      
      <script id="search-hit-fuse-template" type="text/x-template">
        <div class="search-hit" id="summary-{{key}}">
          <div class="search-hit-content">
            <div class="search-hit-name">
              <a href="{{relpermalink}}">{{title}}</a>
              <div class="article-metadata search-hit-type">{{type}}</div>
              <p class="search-hit-description">{{snippet}}</p>
            </div>
          </div>
        </div>
      </script>
      
        <script src="https://cdn.jsdelivr.net/gh/krisk/Fuse@v3.2.1/dist/fuse.min.js" integrity="sha512-o38bmzBGX+hD3JHWUFCDA09btWaqrNmoJ3RXLlrysA7PP01Kgs4UlE4MhelE1v5dJR3+cxlR4qQlotsW7jKsnw==" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/gh/julmot/mark.js@8.11.1/dist/jquery.mark.min.js" integrity="sha512-mhbv5DqBMgrWL+32MmsDOt/OAvqr/cHimk6B8y/bx/xS88MVkYGPiVv2ixKVrkywF2qHplNRUvFsAHUdxZ3Krg==" crossorigin="anonymous"></script>
      
    

    
    

    
    
    
    

    
    
      
      
      
      
      
      
      
    

    

    
    
    
    <script id="page-data" type="application/json">{"use_headroom":false}</script>

    
    
    
    
    
    
    
    
    
      
      
    
    
    <script src="/en/js/wowchemy.min.ab2f2890dbe3e2e83579366d3d6e8fd9.js"></script>

    
    
    
    
    
    






</body>
</html>
